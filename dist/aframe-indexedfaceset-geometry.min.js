!function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){function n(e){if("object"==typeof e)return e;for(var r=e.match(/([+\-0-9eE\.]+)/g),t=[],n={},i=0,o=r?r.length:0;i<o;i+=3)n=new THREE.Vector3(+r[i+0],+r[i+1],+r[i+2]),t.push(n);return t}function i(e){if("object"==typeof e)return e;for(var r=e.match(/([+\-0-9eE\.]+)/g),t=[],n={},i=0,o=r?r.length:0;i<o;i+=3)n=new THREE.Face3(+r[i+0],+r[i+1],+r[i+2]),t.push(n);return t}function o(e){if("object"==typeof e)return e;for(var r=e.match(/([+\-0-9eE\.]+)/g),t=[],n={},i=0,o=r?r.length:0;i<o;i+=2)n=new THREE.Vector2(+r[i+0],+r[i+1]),t.push(n);return t}function u(e,r,t){var n=new THREE.Geometry;if(n.vertices=e.vertices,n.computeBoundingBox(),0==e.triangles.length){for(var i=a(n),o=s(e,i),u=r.x[o],c=r.y[o],p=e.vertices.map(function(e){return[e[u]+0,e[c]+0]}),l=f.triangulate(p),g=0;g<l.length;g+=3)n.faces.push(new THREE.Face3(l[g],l[g+1],l[g+2]));return n}return n.faces=e.triangles.map(function(e){return e.clone()}),n}function a(e){var r=e.boundingBox,t=r.max.clone();return t.sub(r.min),t}function s(e,r){var t=e.projectdir.toLowerCase();return"x"!==t&&"y"!==t&&"z"!==t&&(t="z",r.x<r.y&&r.x<r.z&&(t="x"),r.y<r.x&&r.y<r.z&&(t="y")),t}function c(e,r,t){var n=e.uvs;if(n.length>0){for(var i=+n.length,o=i;o<r.vertices.length;o++)n.push(n[i].clone);return n}var u=a(r),c=s(e,u),f=t.x[c],p=t.y[c],l=r.vertices,g=r.boundingBox,h=g.min[f],m=g.min[p],v=[];return l.forEach(function(e){v.push(new THREE.Vector2((e[f]-h)/u[f],(e[p]-m)/u[p]))}),v}if("undefined"==typeof AFRAME)throw new Error("Geometry attempted to register before AFRAME was available.");var f=t(1);AFRAME.registerGeometry("triangleset",{schema:{vertices:{default:[{x:-.5,y:0,z:.5},{x:.5,y:0,z:.5},{x:.5,y:0,z:-.5},{x:-.5,y:0,z:-.5}],parse:function(e){return n(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},triangles:{default:[],parse:function(e){return i(e)},stringify:function(e){return e.map(function(e){return{x:e.a,y:e.b,z:e.c}}).map(AFRAME.utils.coordinates.stringify).join(",")}},uvs:{default:[],parse:function(e){return o(e)},stringify:function(e){return e.map(function(e){return"object"!=typeof e?e:[e.x,e.y].join(" ")}).join(",")}},projectdir:{type:"string",default:"auto"}},init:function(e){this.dmaps={x:{x:"y",y:"x",z:"x"},y:{x:"z",y:"z",z:"y"}};var r=u(e,this.dmaps,!0);r.faceVertexUvs[0]=[];var t=r.faces,n=c(e,r,this.dmaps);t.forEach(function(e,t){r.faceVertexUvs[0].push([n[e.a],n[e.b],n[e.c]])}),r.uvsNeedUpdate=!0,r.mergeVertices(),r.computeFaceNormals(),r.computeVertexNormals(),r.verticesNeedUpdate=!0,this.geometry=r}});var p=AFRAME.utils.extendDeep,l=AFRAME.primitives.getMeshMixin();AFRAME.registerPrimitive("a-triangleset",p({},l,{defaultComponents:{geometry:{primitive:"triangleset"}},mappings:{vertices:"geometry.vertices",triangles:"geometry.triangles",uvs:"geometry.uvs",projectdir:"geometry.projectdir"}}))},function(e,r,t){var n;!function(){"use strict";function r(e){var r,t,n,i,o,u,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(r=e.length;r--;)e[r][0]<a&&(a=e[r][0]),e[r][0]>c&&(c=e[r][0]),e[r][1]<s&&(s=e[r][1]),e[r][1]>f&&(f=e[r][1]);return t=c-a,n=f-s,i=Math.max(t,n),o=a+.5*t,u=s+.5*n,[[o-20*i,u-i],[o,u+20*i],[o+20*i,u-i]]}function t(e,r,t,n){var i,u,a,s,c,f,p,l,g,h,m=e[r][0],v=e[r][1],y=e[t][0],x=e[t][1],E=e[n][0],d=e[n][1],A=Math.abs(v-x),b=Math.abs(x-d);if(A<o&&b<o)throw new Error("Eek! Coincident points!");return A<o?(s=-((E-y)/(d-x)),f=(y+E)/2,l=(x+d)/2,i=(y+m)/2,u=s*(i-f)+l):b<o?(a=-((y-m)/(x-v)),c=(m+y)/2,p=(v+x)/2,i=(E+y)/2,u=a*(i-c)+p):(a=-((y-m)/(x-v)),s=-((E-y)/(d-x)),c=(m+y)/2,f=(y+E)/2,p=(v+x)/2,l=(x+d)/2,i=(a*c-s*f+l-p)/(a-s),u=A>b?a*(i-c)+p:s*(i-f)+l),g=y-i,h=x-u,{i:r,j:t,k:n,x:i,y:u,r:g*g+h*h}}function i(e){var r,t,n,i,o,u;for(t=e.length;t;)for(i=e[--t],n=e[--t],r=t;r;)if(u=e[--r],o=e[--r],n===o&&i===u||n===u&&i===o){e.splice(t,2),e.splice(r,2);break}}var o=1/1048576;n={triangulate:function(e,n){var u,a,s,c,f,p,l,g,h,m,v,y,x=e.length;if(x<3)return[];if(e=e.slice(0),n)for(u=x;u--;)e[u]=e[u][n];for(s=new Array(x),u=x;u--;)s[u]=u;for(s.sort(function(r,t){return e[t][0]-e[r][0]}),c=r(e),e.push(c[0],c[1],c[2]),f=[t(e,x+0,x+1,x+2)],p=[],l=[],u=s.length;u--;l.length=0){for(y=s[u],a=f.length;a--;)g=e[y][0]-f[a].x,g>0&&g*g>f[a].r?(p.push(f[a]),f.splice(a,1)):(h=e[y][1]-f[a].y,g*g+h*h-f[a].r>o||(l.push(f[a].i,f[a].j,f[a].j,f[a].k,f[a].k,f[a].i),f.splice(a,1)));for(i(l),a=l.length;a;)v=l[--a],m=l[--a],f.push(t(e,m,v,y))}for(u=f.length;u--;)p.push(f[u]);for(f.length=0,u=p.length;u--;)p[u].i<x&&p[u].j<x&&p[u].k<x&&f.push(p[u].i,p[u].j,p[u].k);return f},contains:function(e,r){if(r[0]<e[0][0]&&r[0]<e[1][0]&&r[0]<e[2][0]||r[0]>e[0][0]&&r[0]>e[1][0]&&r[0]>e[2][0]||r[1]<e[0][1]&&r[1]<e[1][1]&&r[1]<e[2][1]||r[1]>e[0][1]&&r[1]>e[1][1]&&r[1]>e[2][1])return null;var t=e[1][0]-e[0][0],n=e[2][0]-e[0][0],i=e[1][1]-e[0][1],o=e[2][1]-e[0][1],u=t*o-n*i;if(0===u)return null;var a=(o*(r[0]-e[0][0])-n*(r[1]-e[0][1]))/u,s=(t*(r[1]-e[0][1])-i*(r[0]-e[0][0]))/u;return a<0||s<0||a+s>1?null:[a,s]}},e.exports=n}()}]);
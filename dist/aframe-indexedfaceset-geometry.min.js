!function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){function n(e){if("object"==typeof e)return e;for(var r=e.match(/([+\-0-9eE\.]+)/g),t=[],n={},i=0,o=r?r.length:0;i<o;i+=3)n=new THREE.Vector3(+r[i+0],+r[i+1],+r[i+2]),t.push(n);return t}function i(e){if("object"==typeof e)return e;var r=e.match(/([+\-0-9eE\.]+)/g),t=r.reduce(function(e,r){return r<0?(e.push([]),e):(e[e.length-1].push(r),e)},[[]]),n=t.filter(function(e,r,t){var n=e.length<3;return n&&r<t.length-1&&console.warn("ifs: skipping face "+r+": "+e),!n}),i=[];return n.forEach(function(e){var r,t=e.length;for(r=2;r<t;r++)i.push(new THREE.Face3(+e[0],+e[r-1],+e[r]))}),i}function o(e){if("object"==typeof e)return e;for(var r=e.match(/([+\-0-9eE\.]+)/g),t=[],n={},i=0,o=r?r.length:0;i<o;i+=2)n=new THREE.Vector2(+r[i+0],+r[i+1]),t.push(n);return t}function u(e,r,t){var n=new THREE.Geometry;if(n.vertices=e.vertices,n.computeBoundingBox(),0==e.faces.length){for(var i=a(n),o=c(e,i),u=r.x[o],f=r.y[o],p=e.vertices.map(function(e){return[e[u]+0,e[f]+0]}),l=s.triangulate(p),h=0;h<l.length;h+=3)n.faces.push(new THREE.Face3(l[h],l[h+1],l[h+2]));return n}return n.faces=e.faces.map(function(e){return e.clone()}),n}function a(e){var r=e.boundingBox,t=r.max.clone();return t.sub(r.min),t}function c(e,r){var t=e.projectdir.toLowerCase();return"x"!==t&&"y"!==t&&"z"!==t&&(t="z",r.x<r.y&&r.x<r.z&&(t="x"),r.y<r.x&&r.y<r.z&&(t="y")),t}function f(e,r,t){var n=e.uvs;if(n.length>0){for(var i=+n.length,o=i;o<r.vertices.length;o++)n.push(n[i].clone);return n}var u=a(r),f=c(e,u),s=t.x[f],p=t.y[f],l=r.vertices,h=r.boundingBox,g=h.min[s],v=h.min[p],m=[];return l.forEach(function(e){m.push(new THREE.Vector2((e[s]-g)/u[s],(e[p]-v)/u[p]))}),m}if("undefined"==typeof AFRAME)throw new Error("Geometry attempted to register before AFRAME was available.");var s=t(1);AFRAME.registerGeometry("indexedfaceset",{schema:{vertices:{default:[{x:-.5,y:0,z:.5},{x:.5,y:0,z:.5},{x:.5,y:0,z:-.5},{x:-.5,y:0,z:-.5}],parse:function(e){return n(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},faces:{default:[],parse:function(e){return i(e)},stringify:function(e){return e.map(function(e){return{x:e.a,y:e.b,z:e.c}}).map(AFRAME.utils.coordinates.stringify).join("-1 ,")}},uvs:{default:[],parse:function(e){return o(e)},stringify:function(e){return e.map(function(e){return"object"!=typeof e?e:[e.x,e.y].join(" ")}).join(",")}},projectdir:{type:"string",default:"auto"}},init:function(e){this.dmaps={x:{x:"y",y:"x",z:"x"},y:{x:"z",y:"z",z:"y"}};var r=u(e,this.dmaps,!0);r.faceVertexUvs[0]=[];var t=r.faces,n=f(e,r,this.dmaps);t.forEach(function(e,t){r.faceVertexUvs[0].push([n[e.a],n[e.b],n[e.c]])}),r.uvsNeedUpdate=!0,r.mergeVertices(),r.computeFaceNormals(),r.computeVertexNormals(),r.verticesNeedUpdate=!0,this.geometry=r}});var p=AFRAME.utils.extendDeep,l=AFRAME.primitives.getMeshMixin();AFRAME.registerPrimitive("a-indexedfaceset",p({},l,{defaultComponents:{geometry:{primitive:"indexedfaceset"}},mappings:{vertices:"geometry.vertices",faces:"geometry.faces",uvs:"geometry.uvs",projectdir:"geometry.projectdir"}}))},function(e,r,t){var n;!function(){"use strict";function r(e){var r,t,n,i,o,u,a=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(r=e.length;r--;)e[r][0]<a&&(a=e[r][0]),e[r][0]>f&&(f=e[r][0]),e[r][1]<c&&(c=e[r][1]),e[r][1]>s&&(s=e[r][1]);return t=f-a,n=s-c,i=Math.max(t,n),o=a+.5*t,u=c+.5*n,[[o-20*i,u-i],[o,u+20*i],[o+20*i,u-i]]}function t(e,r,t,n){var i,u,a,c,f,s,p,l,h,g,v=e[r][0],m=e[r][1],y=e[t][0],x=e[t][1],d=e[n][0],E=e[n][1],A=Math.abs(m-x),b=Math.abs(x-E);if(A<o&&b<o)throw new Error("Eek! Coincident points!");return A<o?(c=-((d-y)/(E-x)),s=(y+d)/2,l=(x+E)/2,i=(y+v)/2,u=c*(i-s)+l):b<o?(a=-((y-v)/(x-m)),f=(v+y)/2,p=(m+x)/2,i=(d+y)/2,u=a*(i-f)+p):(a=-((y-v)/(x-m)),c=-((d-y)/(E-x)),f=(v+y)/2,s=(y+d)/2,p=(m+x)/2,l=(x+E)/2,i=(a*f-c*s+l-p)/(a-c),u=A>b?a*(i-f)+p:c*(i-s)+l),h=y-i,g=x-u,{i:r,j:t,k:n,x:i,y:u,r:h*h+g*g}}function i(e){var r,t,n,i,o,u;for(t=e.length;t;)for(i=e[--t],n=e[--t],r=t;r;)if(u=e[--r],o=e[--r],n===o&&i===u||n===u&&i===o){e.splice(t,2),e.splice(r,2);break}}var o=1/1048576;n={triangulate:function(e,n){var u,a,c,f,s,p,l,h,g,v,m,y,x=e.length;if(x<3)return[];if(e=e.slice(0),n)for(u=x;u--;)e[u]=e[u][n];for(c=new Array(x),u=x;u--;)c[u]=u;for(c.sort(function(r,t){return e[t][0]-e[r][0]}),f=r(e),e.push(f[0],f[1],f[2]),s=[t(e,x+0,x+1,x+2)],p=[],l=[],u=c.length;u--;l.length=0){for(y=c[u],a=s.length;a--;)h=e[y][0]-s[a].x,h>0&&h*h>s[a].r?(p.push(s[a]),s.splice(a,1)):(g=e[y][1]-s[a].y,h*h+g*g-s[a].r>o||(l.push(s[a].i,s[a].j,s[a].j,s[a].k,s[a].k,s[a].i),s.splice(a,1)));for(i(l),a=l.length;a;)m=l[--a],v=l[--a],s.push(t(e,v,m,y))}for(u=s.length;u--;)p.push(s[u]);for(s.length=0,u=p.length;u--;)p[u].i<x&&p[u].j<x&&p[u].k<x&&s.push(p[u].i,p[u].j,p[u].k);return s},contains:function(e,r){if(r[0]<e[0][0]&&r[0]<e[1][0]&&r[0]<e[2][0]||r[0]>e[0][0]&&r[0]>e[1][0]&&r[0]>e[2][0]||r[1]<e[0][1]&&r[1]<e[1][1]&&r[1]<e[2][1]||r[1]>e[0][1]&&r[1]>e[1][1]&&r[1]>e[2][1])return null;var t=e[1][0]-e[0][0],n=e[2][0]-e[0][0],i=e[1][1]-e[0][1],o=e[2][1]-e[0][1],u=t*o-n*i;if(0===u)return null;var a=(o*(r[0]-e[0][0])-n*(r[1]-e[0][1]))/u,c=(t*(r[1]-e[0][1])-i*(r[0]-e[0][0]))/u;return a<0||c<0||a+c>1?null:[a,c]}},e.exports=n}()}]);